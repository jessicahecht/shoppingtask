<!DOCTYPE html>
<html>
    <head>
        <title>Reaction Time Exp Demo</title>
        <script src="jspsych-6.1.0/jspsych.js"></script>
        <script src="jspsych-6.1.0/plugins/jspsych-html-keyboard-response.js"></script>
        <script src="jspsych-6.1.0/plugins/jspsych-image-keyboard-response.js"></script> 
        <link href="jspsych-6.1.0/css/jspsych.css" rel="stylesheet" type="text/css"></link>
    </head>
    <body></body>
    <script>

        var timeline = [] 

        var welcome = {
            type: 'html-keyboard-response', 
            stimulus: "Welcome you are an event planner and have been tasked with buying different items for your client's events.</p><p> Press any key to begin.</p>"
        };
        timeline.push(welcome);

        var instructions = {
            type: "html-keyboard-response",
            stimulus: "<p>You will visit different stores your client has chosen. </p>Your job is to research the different items in the store based on reviews you will be shown and choose the best item to purchase for your client.</p><p> For each item, you will be shown either an aggregate star rating, or a written review." +
                "<p>Press any key to begin.</p>"
        };
        timeline.push(instructions);

        var store_welcome = {
            type: 'html-keyboard-response',
            stimulus: "<p> You have arrived at store 1.</p>"+
                        "<p> Press any key to begin shopping.</p>"
        }
        timeline.push(store_welcome); 

        var store_items =[
            {item: "stimuli/choice_items/cookie/cookie1.png", review: 'stimuli/stars/stars1.png'},
            {item: "stimuli/choice_items/cookie/cookie2.png", review: 'stimuli/stars/stars2.png'},
            {item: "stimuli/choice_items/cookie/cookie3.png", review: 'stimuli/stars/stars3.png'},
            {item: "stimuli/choice_items/cookie/cookie4.png", review: 'stimuli/stars/stars4.png'},
            {item: "stimuli/choice_items/cookie/cookie5.png", review: 'stimuli/stars/stars5.png'},
        ];

        var fixation = {
            type: 'html-keyboard-response',
            stimulus: '<div style="font-size:60px">+</div>',
            choices: jsPsych.NO_KEYS, 
            trial_duration: function(){
                return jsPsych.randomization.sampleWithoutReplacement([250, 500, 750, 1000, 1250, 1500],1)[0];
            },
        };

        var store = {
            type: 'html-keyboard-response',
            stimulus: function(){
                var html = "<img src ='"+jsPsych.timelineVariable('item', true)+"'>"; //width="225" height="225"
                html += "<img src ='"+jsPsych.timelineVariable('review', true)+"' >"; //width="400" height="100"
                return html;
            },
            choices: jsPsych.NO_KEYS,
            trial_duration: 2500
        };

        var store_procedure = {
            timeline: [fixation, store],
            timeline_variables: store_items,
            randomize_order: true 
        };

        timeline.push(store_procedure);

        //start experiment 
        jsPsych.init({
            timeline: timeline
        });

    </script>
</html>
